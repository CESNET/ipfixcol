Summary: IPFIX Collector Toolset.
Name: ipfixcol
Version: %(cut -f1 ./VERSION | tr -d '\n')
Release: @RELEASE@
URL: http://www.liberouter.org/
Source: http://homeproj.cesnet.cz/rpm/liberouter/stable/SOURCES/%{name}-%{version}-%{release}.tar.gz
Group: Liberouter
License: BSD
Vendor: CESNET, z.s.p.o.
Packager: @USERNAME@ <@USERMAIL@>
BuildRoot: %{_tmppath}/%{name}-%{version}-%{release}

BuildRequires: gcc make doxygen pkgconfig
Requires: libxml2
BuildRequires: libxml2-devel
Requires: lksctp-tools
BuildRequires: lksctp-tools-devel

%description
IPFIX Collector Toolset

%package devel
Summary: IPFIX Collector development package
Group: Liberouter
Requires: ipfixcol = %{version}-%{release}

%description devel
This package contains header files needed for development of plugins for IPFIX Collector (ipfixcol).

%prep
%setup

%post

%preun

%postun


%build
./configure --with-distro=@DISTRO@ --prefix=%{_prefix} @CONFIGURE_PARAMS@;
make
make storage-plugins
make input-plugins
make doc

%install
make DESTDIR=$RPM_BUILD_ROOT install

%files
%{_bindir}/ipfixcol
%{_bindir}/ipfixviewer
/usr/lib64/pkgconfig/ipfixcol.pc
%{_mandir}/man1/ipfixcol.1.gz
#%{_mandir}/man5/ipfixcol.conf.5*
#input plugins
/usr/lib64/ipfixcol-udp-input.so
/usr/lib64/ipfixcol-tcp-input.so
/usr/lib64/ipfixcol-sctp-input.so
/usr/lib64/ipfixcol-ipfix-input.so
#storage plugins
/usr/lib64/ipfixcol-ipfix-output.so
/usr/lib64/ipfixcol-dummy-output.so
%{_mandir}/man1/ipfixcol-dummy-output.1.gz
#config files
/etc/ipfixcol/internalcfg.xml
/etc/ipfixcol/ipfix-elements.xml
/etc/ipfixcol/startup.xml

%files devel
%{_prefix}/include/ipfixcol.h
%{_prefix}/include/ipfixcol/*.h
#doxygen
/usr/share/ipfixcol/doxygen/*